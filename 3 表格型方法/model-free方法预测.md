# 预测方法对比

以下方法包括更新方法, 其主要思想有一点类似于梯度下降的思想, 如何对其进行每次根据哪些信息进行更新显得比较重要. 主要介绍可以在下面几种方法的对比中的体现出来

## MC方法

每次更新的公式为:

$$
V(s_t) \leftarrow V(s_t) + \frac{1}{N(s)}[G_t-V(s_t)]
$$

## TD方法

每次更新的公式如下所示:

$$
V(s_t) = V(s_t) + \alpha (\underbrace{r_{t+1}+\gamma V(s_{t+1})}_{G_{i,t}: \text{ TD Target }} - V(s_t))
$$

## 总结区别

- **时序差分**方法可以**在线学习**（online learning），每走一步就可以更新，效率高。**蒙特卡洛**方法必须等**游戏结束**(从上述公式中的$G$就可以看出, 因为一个下标有i, 一个没有i)时才可以学习
- **时序差分**方法可以从**不完整序列**上进行学习。**蒙特卡洛**方法只能从**完整的序列**上进行学习
- **时序差分**方法可以在**连续**的环境下（没有终止）进行学习。蒙特卡洛方法只能在有终止的情况下学习
- **时序差分**方法**利用了马尔可夫性质**，在马尔可夫环境下有更高的学习效率。蒙特卡洛方法没有假设环境具有马尔可夫性质，利用采样的价值来估计某个状态的价值，在不是马尔可夫的环境下更加有效。

其他例子上的解释:

> 例如来解释 时序差分方法和蒙特卡洛方法的区别。 时序差分方法是指在不清楚马尔可夫状态转移概率的情况下，以采样的方式得到不完整的状态序列，估计某状态在该状态序列完整后可能得到的奖励，并通过不断地采样持续更新价值。蒙特卡洛则需要经历完整的状态序列后，再来更新状态的真实价值。 例如，我们想获得开车去公司的时间，每天上班开车的经历就是一次采样。假设我们今天在路口 A 遇到了堵车， 时序差分方法会在路口 A 就开始更新预计到达路口 B、路口 C $\cdots \cdots$，以及到达公司的时间； 而蒙特卡洛方法并不会立即更新时间，而是在到达公司后，再更新到达每个路口和公司的时间。 **时序差分方法能够在知道结果之前就开始学习，相比蒙特卡洛方法，其更快速、灵活**。

在每次的更新中, 时序差分只考虑单段式的更新, 在此基础上可以更新深度, 更新广度等操作.

![比较](comparison_5.png)
